const _0x2debe1=_0x2de7;(function(_0x392b4d,_0x260f9d){const _0x3eb7bd=_0x2de7,_0x22df52=_0x392b4d();while(!![]){try{const _0x167f10=-parseInt(_0x3eb7bd(0x22a))/0x1*(parseInt(_0x3eb7bd(0x24f))/0x2)+-parseInt(_0x3eb7bd(0x1da))/0x3*(parseInt(_0x3eb7bd(0x272))/0x4)+parseInt(_0x3eb7bd(0x29b))/0x5+parseInt(_0x3eb7bd(0x241))/0x6+-parseInt(_0x3eb7bd(0x26e))/0x7*(parseInt(_0x3eb7bd(0x1e0))/0x8)+-parseInt(_0x3eb7bd(0x1f0))/0x9*(-parseInt(_0x3eb7bd(0x285))/0xa)+-parseInt(_0x3eb7bd(0x276))/0xb*(-parseInt(_0x3eb7bd(0x25f))/0xc);if(_0x167f10===_0x260f9d)break;else _0x22df52['push'](_0x22df52['shift']());}catch(_0x2a56a2){_0x22df52['push'](_0x22df52['shift']());}}}(_0x41b1,0x486b3));class SceneObject{static [_0x2debe1(0x1f5)]=0x0;constructor(_0x35ac6d,_0x5662ca,_0xa923a){const _0x2e9817=_0x2debe1;if(this[_0x2e9817(0x1e8)]==SceneObject)throw new Error(_0x2e9817(0x207));this['_device']=_0x35ac6d,this['_canvasFormat']=_0x5662ca,this[_0x2e9817(0x1c6)]=_0xa923a,SceneObject[_0x2e9817(0x1f5)]+=0x1;}['getName'](){const _0x467aef=_0x2debe1;return this['constructor'][_0x467aef(0x239)]+'\x20'+SceneObject[_0x467aef(0x1f5)]['toString']();}async[_0x2debe1(0x281)](){const _0x7aaa95=_0x2debe1;await this[_0x7aaa95(0x1ca)](),await this['createShaders'](),await this[_0x7aaa95(0x1ec)](),await this[_0x7aaa95(0x25d)]();}async[_0x2debe1(0x1ca)](){const _0x1e7b9f=_0x2debe1;throw new Error(_0x1e7b9f(0x1c8));}[_0x2debe1(0x262)](){}['loadShader'](_0x3c951a){return new Promise((_0x573317,_0x286313)=>{const _0x3ed91c=_0x2de7,_0x55be1b=new XMLHttpRequest();_0x55be1b[_0x3ed91c(0x20c)](_0x3ed91c(0x215),_0x3c951a),_0x55be1b[_0x3ed91c(0x1d2)](_0x3ed91c(0x261),'no-cache,\x20no-store,\x20max-age=0'),_0x55be1b[_0x3ed91c(0x1ff)]=function(){const _0x52a0dd=_0x3ed91c;_0x55be1b[_0x52a0dd(0x206)]===XMLHttpRequest[_0x52a0dd(0x1dd)]&&_0x55be1b[_0x52a0dd(0x24e)]===0xc8?_0x573317(_0x55be1b[_0x52a0dd(0x1ce)]):_0x286313({'status':_0x55be1b[_0x52a0dd(0x24e)],'statusText':_0x55be1b[_0x52a0dd(0x1c4)]});},_0x55be1b[_0x3ed91c(0x21f)]=function(){const _0x4c004f=_0x3ed91c;_0x286313({'status':_0x55be1b[_0x4c004f(0x24e)],'statusText':_0x55be1b['statusText']});},_0x55be1b[_0x3ed91c(0x268)]();});}async[_0x2debe1(0x277)](){const _0x6a8bcc=_0x2debe1,_0x5065ca=await this[_0x6a8bcc(0x24a)](this[_0x6a8bcc(0x1c6)]);this[_0x6a8bcc(0x289)]=this[_0x6a8bcc(0x234)][_0x6a8bcc(0x237)]({'label':_0x6a8bcc(0x247)+this['getName'](),'code':_0x5065ca});}async[_0x2debe1(0x1ec)](){const _0x1a9550=_0x2debe1;throw new Error(_0x1a9550(0x1bc));}['render'](_0x37d1f9){const _0xed0ed0=_0x2debe1;throw new Error(_0xed0ed0(0x271));}async[_0x2debe1(0x25d)](){}['compute'](_0x140be2){}}class Camera2DVertexObject extends SceneObject{constructor(_0x55ef7b,_0x2e83b6,_0x2c117f,_0x44bc2d,_0x5a7692,_0x3e0c4e,_0x169b6c=0x1){const _0x1aaa71=_0x2debe1;super(_0x55ef7b,_0x2e83b6,_0x5a7692),this[_0x1aaa71(0x290)]=_0x2c117f,this['_vertices']=_0x44bc2d,this[_0x1aaa71(0x23e)]=_0x3e0c4e,this['_numInstances']=_0x169b6c;}async[_0x2debe1(0x1ca)](){const _0x93b832=_0x2debe1;this['_vertexBuffer']=this['_device'][_0x93b832(0x252)]({'label':_0x93b832(0x223)+this[_0x93b832(0x22e)](),'size':this[_0x93b832(0x274)][_0x93b832(0x20f)],'usage':GPUBufferUsage[_0x93b832(0x1f4)]|GPUBufferUsage[_0x93b832(0x1e1)]}),this['_device'][_0x93b832(0x1e2)][_0x93b832(0x266)](this['_vertexBuffer'],0x0,this[_0x93b832(0x274)]),this[_0x93b832(0x26b)]={'arrayStride':0x2*Float32Array[_0x93b832(0x214)],'attributes':[{'shaderLocation':0x0,'format':_0x93b832(0x1c9),'offset':0x0}]},this['_cameraPoseBuffer']=this[_0x93b832(0x234)][_0x93b832(0x252)]({'label':_0x93b832(0x282)+this[_0x93b832(0x22e)](),'size':this[_0x93b832(0x290)][_0x93b832(0x20f)],'usage':GPUBufferUsage[_0x93b832(0x270)]|GPUBufferUsage[_0x93b832(0x1e1)]}),this[_0x93b832(0x1bf)]();}['updateGeometry'](){}[_0x2debe1(0x1bf)](){const _0x42167d=_0x2debe1;if(this[_0x42167d(0x227)])this[_0x42167d(0x234)][_0x42167d(0x1e2)][_0x42167d(0x266)](this[_0x42167d(0x227)],0x0,this[_0x42167d(0x290)]);}async['createRenderPipeline'](){const _0x1a1ccd=_0x2debe1;this[_0x1a1ccd(0x1fd)]=this['_device'][_0x1a1ccd(0x1ec)]({'label':_0x1a1ccd(0x297)+this[_0x1a1ccd(0x22e)](),'layout':_0x1a1ccd(0x1c1),'vertex':{'module':this['_shaderModule'],'entryPoint':_0x1a1ccd(0x1eb),'buffers':[this[_0x1a1ccd(0x26b)]]},'fragment':{'module':this[_0x1a1ccd(0x289)],'entryPoint':_0x1a1ccd(0x217),'targets':[{'format':this['_canvasFormat']}]},'primitive':{'topology':this[_0x1a1ccd(0x23e)]}}),this['_bindGroup']=this[_0x1a1ccd(0x234)][_0x1a1ccd(0x21d)]({'label':_0x1a1ccd(0x1d1)+this[_0x1a1ccd(0x22e)](),'layout':this[_0x1a1ccd(0x1fd)][_0x1a1ccd(0x20b)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x1a1ccd(0x227)]}}]});}[_0x2debe1(0x296)](_0x25027e){const _0xe462f3=_0x2debe1;_0x25027e[_0xe462f3(0x27b)](this[_0xe462f3(0x1fd)]),_0x25027e[_0xe462f3(0x1ef)](0x0,this[_0xe462f3(0x249)]),_0x25027e[_0xe462f3(0x273)](0x0,this[_0xe462f3(0x25b)]),_0x25027e[_0xe462f3(0x1c5)](this['_vertices'][_0xe462f3(0x28f)]/0x2,this['_numInstances']);}async['createComputePipeline'](){}[_0x2debe1(0x225)](_0x28654f){}}const GRID_SIZE=0x100,MAX_TOGGLES=0x40;class QuestGridObject extends Camera2DVertexObject{constructor(_0x2d7b35,_0x41e891,_0x26fe49,_0x51997e,_0x40c9ab,_0x2f7c6b,_0xc3a573){const _0x47ced4=_0x2debe1;super(_0x2d7b35,_0x41e891,_0x26fe49,_0x51997e,_0x40c9ab,_0x2f7c6b,_0xc3a573),this['_paused']=![],this[_0x47ced4(0x1fa)]=0x96,this[_0x47ced4(0x1c7)]=0x0,this[_0x47ced4(0x22d)]=new Uint32Array(MAX_TOGGLES);}async[_0x2debe1(0x1ca)](){const _0x34316c=_0x2debe1;await super[_0x34316c(0x1ca)](),this[_0x34316c(0x248)]=new Uint32Array(GRID_SIZE*GRID_SIZE),this[_0x34316c(0x27d)](),this[_0x34316c(0x1c0)]=[this[_0x34316c(0x234)][_0x34316c(0x252)]({'label':_0x34316c(0x279)+this[_0x34316c(0x22e)](),'size':this['_cellStatus']['byteLength'],'usage':GPUBufferUsage[_0x34316c(0x1cd)]|GPUBufferUsage['COPY_DST']}),this[_0x34316c(0x234)]['createBuffer']({'label':_0x34316c(0x20a)+this['getName'](),'size':this['_cellStatus'][_0x34316c(0x20f)],'usage':GPUBufferUsage['STORAGE']|GPUBufferUsage[_0x34316c(0x1e1)]})],this[_0x34316c(0x234)][_0x34316c(0x1e2)][_0x34316c(0x266)](this[_0x34316c(0x1c0)][0x0],0x0,this[_0x34316c(0x248)]),this[_0x34316c(0x234)][_0x34316c(0x1e2)][_0x34316c(0x266)](this[_0x34316c(0x1c0)][0x1],0x0,this['_cellStatus']),this[_0x34316c(0x27a)]=this[_0x34316c(0x234)][_0x34316c(0x252)]({'label':_0x34316c(0x27f)+this[_0x34316c(0x22e)](),'size':0x4,'usage':GPUBufferUsage['UNIFORM']|GPUBufferUsage[_0x34316c(0x1e1)]}),this['_togglesBuffer']=this['_device']['createBuffer']({'label':_0x34316c(0x293)+this[_0x34316c(0x22e)](),'size':MAX_TOGGLES*0x4,'usage':GPUBufferUsage[_0x34316c(0x1cd)]|GPUBufferUsage[_0x34316c(0x1e1)]}),this[_0x34316c(0x251)]=0x0;}['_randomize'](){const _0x407bd0=_0x2debe1;for(let _0x197dff=0x0;_0x197dff<this['_cellStatus'][_0x407bd0(0x28f)];_0x197dff++){this[_0x407bd0(0x248)][_0x197dff]=Math['random']()>0.5?0x1:0x0;}}[_0x2debe1(0x1f9)](){const _0x1772c1=_0x2debe1;this[_0x1772c1(0x27d)](),this[_0x1772c1(0x234)]['queue']['writeBuffer'](this[_0x1772c1(0x1c0)][0x0],0x0,this[_0x1772c1(0x248)]),this[_0x1772c1(0x234)][_0x1772c1(0x1e2)][_0x1772c1(0x266)](this[_0x1772c1(0x1c0)][0x1],0x0,this[_0x1772c1(0x248)]);}['setPaused'](_0xf16312){const _0x44a69f=_0x2debe1;this[_0x44a69f(0x265)]=_0xf16312;}['setSpeed'](_0x3cc3f8){const _0x2e5a96=_0x2debe1;this[_0x2e5a96(0x1fa)]=Math[_0x2e5a96(0x1f6)](0x32,Math['min'](0x1f4,this[_0x2e5a96(0x1fa)]+_0x3cc3f8));}['addToggle'](_0x1c74c6,_0x240ece){const _0x450f0c=_0x2debe1;if(_0x1c74c6<0x0||_0x1c74c6>=GRID_SIZE||_0x240ece<0x0||_0x240ece>=GRID_SIZE)return![];if(this['_toggleCount']>=MAX_TOGGLES)return![];return this[_0x450f0c(0x22d)][this[_0x450f0c(0x1c7)]++]=_0x240ece*GRID_SIZE+_0x1c74c6,!![];}async[_0x2debe1(0x1ec)](){const _0x3adc3b=_0x2debe1;this['_bindGroupLayout']=this['_device'][_0x3adc3b(0x23d)]({'label':_0x3adc3b(0x23f)+this[_0x3adc3b(0x22e)](),'entries':[{'binding':0x0,'visibility':GPUShaderStage['VERTEX'],'buffer':{}},{'binding':0x1,'visibility':GPUShaderStage['VERTEX']|GPUShaderStage[_0x3adc3b(0x230)],'buffer':{'type':_0x3adc3b(0x1f7)}},{'binding':0x2,'visibility':GPUShaderStage[_0x3adc3b(0x230)],'buffer':{'type':_0x3adc3b(0x26a)}},{'binding':0x3,'visibility':GPUShaderStage[_0x3adc3b(0x230)],'buffer':{}},{'binding':0x4,'visibility':GPUShaderStage[_0x3adc3b(0x230)],'buffer':{'type':'read-only-storage'}}]}),this['_pipelineLayout']=this['_device'][_0x3adc3b(0x218)]({'label':_0x3adc3b(0x26f),'bindGroupLayouts':[this[_0x3adc3b(0x28c)]]}),this[_0x3adc3b(0x1fd)]=this[_0x3adc3b(0x234)][_0x3adc3b(0x1ec)]({'label':_0x3adc3b(0x243)+this['getName'](),'layout':this[_0x3adc3b(0x1e5)],'vertex':{'module':this[_0x3adc3b(0x289)],'entryPoint':_0x3adc3b(0x1eb),'buffers':[this['_vertexBufferLayout']]},'fragment':{'module':this[_0x3adc3b(0x289)],'entryPoint':_0x3adc3b(0x217),'targets':[{'format':this['_canvasFormat']}]},'primitive':{'topology':this[_0x3adc3b(0x23e)]}}),this[_0x3adc3b(0x280)]();}[_0x2debe1(0x280)](){const _0x263b4b=_0x2debe1;this[_0x263b4b(0x203)]=[this[_0x263b4b(0x234)][_0x263b4b(0x21d)]({'label':_0x263b4b(0x269)+this['getName'](),'layout':this['_bindGroupLayout'],'entries':[{'binding':0x0,'resource':{'buffer':this[_0x263b4b(0x227)]}},{'binding':0x1,'resource':{'buffer':this['_cellStateBuffers'][0x0]}},{'binding':0x2,'resource':{'buffer':this[_0x263b4b(0x1c0)][0x1]}},{'binding':0x3,'resource':{'buffer':this[_0x263b4b(0x27a)]}},{'binding':0x4,'resource':{'buffer':this[_0x263b4b(0x267)]}}]}),this[_0x263b4b(0x234)][_0x263b4b(0x21d)]({'label':_0x263b4b(0x1ee)+this[_0x263b4b(0x22e)](),'layout':this['_bindGroupLayout'],'entries':[{'binding':0x0,'resource':{'buffer':this[_0x263b4b(0x227)]}},{'binding':0x1,'resource':{'buffer':this[_0x263b4b(0x1c0)][0x1]}},{'binding':0x2,'resource':{'buffer':this[_0x263b4b(0x1c0)][0x0]}},{'binding':0x3,'resource':{'buffer':this[_0x263b4b(0x27a)]}},{'binding':0x4,'resource':{'buffer':this[_0x263b4b(0x267)]}}]})];}[_0x2debe1(0x296)](_0x568a49){const _0x2e5cdc=_0x2debe1;_0x568a49[_0x2e5cdc(0x27b)](this['_renderPipeline']),_0x568a49[_0x2e5cdc(0x1ef)](0x0,this[_0x2e5cdc(0x249)]),_0x568a49['setBindGroup'](0x0,this[_0x2e5cdc(0x203)][this[_0x2e5cdc(0x251)]%0x2]),_0x568a49[_0x2e5cdc(0x1c5)](this[_0x2e5cdc(0x274)][_0x2e5cdc(0x28f)]/0x2,this[_0x2e5cdc(0x1d4)]);}async[_0x2debe1(0x25d)](){const _0x3c3b86=_0x2debe1;this[_0x3c3b86(0x22c)]=this[_0x3c3b86(0x234)][_0x3c3b86(0x25d)]({'label':'Quest\x20Grid\x20update\x20pipeline\x20'+this[_0x3c3b86(0x22e)](),'layout':this[_0x3c3b86(0x1e5)],'compute':{'module':this[_0x3c3b86(0x289)],'entryPoint':_0x3c3b86(0x25c)}});}[_0x2debe1(0x225)](_0x215e96){const _0x5c5f4d=_0x2debe1;if(this[_0x5c5f4d(0x265)])return;const _0x11ebf1=performance[_0x5c5f4d(0x1c3)]();this[_0x5c5f4d(0x1e6)]=this['_lastComputeTime']??_0x11ebf1;if(_0x11ebf1-this[_0x5c5f4d(0x1e6)]<this['_updateIntervalMs'])return;this[_0x5c5f4d(0x1e6)]=_0x11ebf1;const _0x5b18bf=new Uint32Array([this[_0x5c5f4d(0x1c7)]]);this[_0x5c5f4d(0x234)][_0x5c5f4d(0x1e2)][_0x5c5f4d(0x266)](this[_0x5c5f4d(0x27a)],0x0,_0x5b18bf),this[_0x5c5f4d(0x234)][_0x5c5f4d(0x1e2)][_0x5c5f4d(0x266)](this[_0x5c5f4d(0x267)],0x0,this[_0x5c5f4d(0x22d)]),_0x215e96[_0x5c5f4d(0x27b)](this[_0x5c5f4d(0x22c)]),_0x215e96[_0x5c5f4d(0x273)](0x0,this[_0x5c5f4d(0x203)][this[_0x5c5f4d(0x251)]%0x2]),_0x215e96[_0x5c5f4d(0x246)](Math['ceil'](GRID_SIZE/0x8),Math[_0x5c5f4d(0x222)](GRID_SIZE/0x8)),this[_0x5c5f4d(0x1c7)]=0x0,++this[_0x5c5f4d(0x251)];}}export{GRID_SIZE};function geometricProduct(_0x226dd9,_0x22e1ab){return[_0x226dd9[0x0]*_0x22e1ab[0x0]-_0x226dd9[0x1]*_0x22e1ab[0x1],_0x226dd9[0x0]*_0x22e1ab[0x1]+_0x226dd9[0x1]*_0x22e1ab[0x0],_0x226dd9[0x0]*_0x22e1ab[0x2]+_0x226dd9[0x1]*_0x22e1ab[0x3]+_0x226dd9[0x2]*_0x22e1ab[0x0]-_0x226dd9[0x3]*_0x22e1ab[0x1],_0x226dd9[0x0]*_0x22e1ab[0x3]-_0x226dd9[0x1]*_0x22e1ab[0x2]+_0x226dd9[0x2]*_0x22e1ab[0x1]+_0x226dd9[0x3]*_0x22e1ab[0x0]];}function reverse(_0x154db8){return[_0x154db8[0x0],-_0x154db8[0x1],-_0x154db8[0x2],-_0x154db8[0x3]];}function createPoint(_0x5e296c){return[0x0,0x1,_0x5e296c[0x1],-_0x5e296c[0x0]];}function _0x41b1(){const _0x1571d8=['max','read-only-storage','top','reset','_updateIntervalMs','font','_textCanvas','_renderPipeline','position','onload','WebGPU\x20is\x20not\x20supported\x20in\x20this\x20browser.','_paddingx','1px\x20solid\x20red','_bindGroups','mouseleave','forEach','readyState','Abstract\x20classes\x20can\x27t\x20be\x20instantiated.','_lines','left','Quest\x20Grid\x20Buffer\x202\x20','getBindGroupLayout','open','_canvas','fillStyle','byteLength','normalizeMotor','body','_canvasHeight','moveRight','BYTES_PER_ELEMENT','GET','_objects','fragmentMain','createPipelineLayout','fillText','sqrt','createTranslator','keydown','createBindGroup','canvas','onerror','moveDown','beginComputePass','ceil','Vertices\x20','updateTextRegion','compute','clear','_cameraPoseBuffer','catch','min','1yolAgC','height','_computePipeline','_toggles','getName','createElement','COMPUTE','_textContext','Quest\x203\x20ready','mousedown','_device','createView','requestDevice','createShaderModule','zoomIn','name','resizeCanvas','10px','configure','createBindGroupLayout','_topology','Quest\x20Grid\x20Bind\x20Group\x20Layout\x20','100','197184pAUyqd','Couldn\x27t\x20request\x20WebGPU\x20adapter.','Quest\x20Grid\x20Render\x20Pipeline\x20','beginRenderPass','mouseup','dispatchWorkgroups','Shader\x20','_cellStatus','_vertexBuffer','loadShader','finish','gpu','createCommandEncoder','status','803504kzrDgl','_paddingtop','_step','createBuffer','devicePixelRatio','clientY','push','border','_width','some','split','textBaseline','_bindGroup','computeMain','createComputePipeline','map','13176264xEUiBK','zoomOut','Cache-Control','updateGeometry','innerHTML','measureText','_paused','writeBuffer','_togglesBuffer','send','Quest\x20Grid\x20Bind\x20Group\x201\x20','storage','_vertexBufferLayout','message','toggleVisibility','77AiqGSp','Quest\x20Grid\x20Pipeline\x20Layout','UNIFORM','Method\x20\x27render(pass)\x27\x20must\x20be\x20implemented.','148idHFqY','setBindGroup','_vertices','_canvasFormat','11CYUWzd','createShaders','hidden','Quest\x20Grid\x20Buffer\x201\x20','_paramsBuffer','setPipeline','setSpeed','_randomize','clientX','Params\x20','_createBindGroups','init','Camera\x20Pose\x20','_textFont','applyMotorToPoint','10qopViN','updateText','rgba(1,\x201,\x201,\x200.5)','geometricProduct','_shaderModule','floor','_clearColor','_bindGroupLayout','updatePose','_pose','length','_cameraPose','submit','WASD:\x20pan\x20|\x20Q/E:\x20zoom\x20|\x20Space:\x20pause\x20|\x20R:\x20reset\x20|\x20+/-:\x20speed\x20|\x20Click:\x20toggle\x20cell\x20|\x20F:\x20hide','Toggles\x20','absolute','remove','render','Render\x20Pipeline\x20','</br>','white','mousemove','276185lkLoOk','getContext','then','appendSceneObject','Method\x20\x27createRenderPipeline()\x27\x20must\x20be\x20implemented.','_canvasWidth','addToggle','updateCameraPose','_cellStateBuffers','auto','innerHeight','now','statusText','draw','_shaderFile','_toggleCount','Method\x20\x27createGeometry()\x27\x20must\x20be\x20implemented.','float32x2','createGeometry','ArrowUp','style','STORAGE','responseText','18px\x20Arial','_lineSpacing','Renderer\x20Bind\x20Group\x20','setRequestHeader','getCurrentTexture','_numInstances','moveLeft','line-strip','fillRect','moveUp','requestAdapter','34599krNnDs','renderCanvas','addEventListener','DONE','renderToSelectedView','key','109208TfJlWc','COPY_DST','queue','_context','appendChild','_pipelineLayout','_lastComputeTime','innerWidth','constructor','webgpu','_fontSize','vertexMain','createRenderPipeline','width','Quest\x20Grid\x20Bind\x20Group\x202\x20','setVertexBuffer','802242Fxbgig','_height','end','zIndex','VERTEX','_objectCnt'];_0x41b1=function(){return _0x1571d8;};return _0x41b1();}function extractPoint(_0x2d1462){return[-_0x2d1462[0x3]/_0x2d1462[0x1],_0x2d1462[0x2]/_0x2d1462[0x1]];}function applyMotor(_0x4e14d3,_0x27c9ca){const _0x1929ad=reverse(_0x27c9ca),_0x5ed541=geometricProduct(_0x4e14d3,_0x1929ad);return geometricProduct(_0x27c9ca,_0x5ed541);}export function applyMotorToPoint(_0x34d701,_0xbec990){const _0x4912e0=createPoint(_0x34d701),_0x8b0e58=applyMotor(_0x4912e0,_0xbec990);return extractPoint(_0x8b0e58);}function _0x2de7(_0x409159,_0xc12f95){_0x409159=_0x409159-0x1ba;const _0x41b182=_0x41b1();let _0x2de743=_0x41b182[_0x409159];return _0x2de743;}export function normalizeMotor(_0x34cc3f){const _0x5ab5c6=_0x2debe1,_0x500b2d=Math[_0x5ab5c6(0x21a)](_0x34cc3f[0x0]*_0x34cc3f[0x0]+_0x34cc3f[0x1]*_0x34cc3f[0x1]+_0x34cc3f[0x2]*_0x34cc3f[0x2]+_0x34cc3f[0x3]*_0x34cc3f[0x3]);if(_0x500b2d===0x0)return[0x1,0x0,0x0,0x0];return[_0x34cc3f[0x0]/_0x500b2d,_0x34cc3f[0x1]/_0x500b2d,_0x34cc3f[0x2]/_0x500b2d,_0x34cc3f[0x3]/_0x500b2d];}export function createTranslator(_0x4cd538,_0x59eff5){return[0x1,0x0,_0x4cd538/0x2,_0x59eff5/0x2];}{geometricProduct,reverse,createTranslator,normalizeMotor,applyMotorToPoint;};class Camera{constructor(){const _0x16b05a=_0x2debe1;this[_0x16b05a(0x28e)]=new Float32Array([0x1,0x0,0x0,0x0,0x1,0x1]);}[_0x2debe1(0x28d)](_0x26c060){const _0x5b8fe0=_0x2debe1;this[_0x5b8fe0(0x28e)][0x0]=_0x26c060[0x0],this[_0x5b8fe0(0x28e)][0x1]=_0x26c060[0x1],this['_pose'][0x2]=_0x26c060[0x2],this[_0x5b8fe0(0x28e)][0x3]=_0x26c060[0x3];}[_0x2debe1(0x1d5)](_0x122b50){const _0x2b52bd=_0x2debe1,_0x1238a8=PGA2D[_0x2b52bd(0x21b)](-_0x122b50,0x0),_0x2adcf0=PGA2D['normalizeMotor'](PGA2D[_0x2b52bd(0x288)](_0x1238a8,[this[_0x2b52bd(0x28e)][0x0],this[_0x2b52bd(0x28e)][0x1],this['_pose'][0x2],this[_0x2b52bd(0x28e)][0x3]]));this[_0x2b52bd(0x28d)](_0x2adcf0);}['moveRight'](_0x4f61e3){const _0xc0f9a0=_0x2debe1,_0x555f1a=PGA2D[_0xc0f9a0(0x21b)](_0x4f61e3,0x0),_0x2edbd4=PGA2D[_0xc0f9a0(0x210)](PGA2D[_0xc0f9a0(0x288)](_0x555f1a,[this[_0xc0f9a0(0x28e)][0x0],this[_0xc0f9a0(0x28e)][0x1],this[_0xc0f9a0(0x28e)][0x2],this[_0xc0f9a0(0x28e)][0x3]]));this[_0xc0f9a0(0x28d)](_0x2edbd4);}[_0x2debe1(0x1d8)](_0x3b4411){const _0x25627d=_0x2debe1,_0x32d688=PGA2D[_0x25627d(0x21b)](0x0,_0x3b4411),_0x5b450c=PGA2D[_0x25627d(0x210)](PGA2D['geometricProduct'](_0x32d688,[this[_0x25627d(0x28e)][0x0],this[_0x25627d(0x28e)][0x1],this[_0x25627d(0x28e)][0x2],this[_0x25627d(0x28e)][0x3]]));this[_0x25627d(0x28d)](_0x5b450c);}[_0x2debe1(0x220)](_0x39a4ed){const _0x1c7f7f=_0x2debe1,_0x338afc=PGA2D[_0x1c7f7f(0x21b)](0x0,-_0x39a4ed),_0x21cbe2=PGA2D[_0x1c7f7f(0x210)](PGA2D['geometricProduct'](_0x338afc,[this[_0x1c7f7f(0x28e)][0x0],this['_pose'][0x1],this[_0x1c7f7f(0x28e)][0x2],this[_0x1c7f7f(0x28e)][0x3]]));this['updatePose'](_0x21cbe2);}[_0x2debe1(0x238)](){const _0x5c46c9=_0x2debe1;this[_0x5c46c9(0x28e)][0x4]=Math[_0x5c46c9(0x229)](0x8,this['_pose'][0x4]*1.1),this['_pose'][0x5]=Math[_0x5c46c9(0x229)](0x8,this[_0x5c46c9(0x28e)][0x5]*1.1);}[_0x2debe1(0x260)](){const _0x548bb2=_0x2debe1;this[_0x548bb2(0x28e)][0x4]=Math['max'](0.5,this[_0x548bb2(0x28e)][0x4]/1.1),this[_0x548bb2(0x28e)][0x5]=Math[_0x548bb2(0x1f6)](0.5,this[_0x548bb2(0x28e)][0x5]/1.1);}}class StandardTextObject{constructor(_0x5d06f5,_0x5755bb=0x5,_0x6dccb0=_0x2debe1(0x1cf)){const _0x4a0494=_0x2debe1;this[_0x4a0494(0x283)]=_0x6dccb0,this[_0x4a0494(0x1d0)]=_0x5755bb,this[_0x4a0494(0x1fc)]=document[_0x4a0494(0x22f)](_0x4a0494(0x21e)),this[_0x4a0494(0x231)]=this[_0x4a0494(0x1fc)][_0x4a0494(0x29c)]('2d'),this[_0x4a0494(0x224)](_0x5d06f5),this[_0x4a0494(0x286)](_0x5d06f5),this[_0x4a0494(0x1fc)][_0x4a0494(0x1cc)][_0x4a0494(0x1fe)]=_0x4a0494(0x294),this[_0x4a0494(0x1fc)]['style']['top']=_0x4a0494(0x23b),this[_0x4a0494(0x1fc)][_0x4a0494(0x1cc)][_0x4a0494(0x209)]=_0x4a0494(0x23b),this[_0x4a0494(0x1fc)][_0x4a0494(0x1cc)][_0x4a0494(0x256)]=_0x4a0494(0x202),document['body'][_0x4a0494(0x1e4)](this[_0x4a0494(0x1fc)]);}['updateTextRegion'](_0x16658b){const _0x38722b=_0x2debe1;this[_0x38722b(0x231)]['font']=this['_textFont'],this[_0x38722b(0x208)]=_0x16658b[_0x38722b(0x259)]('\x0a'),this[_0x38722b(0x257)]=Math[_0x38722b(0x1f6)](...this[_0x38722b(0x208)][_0x38722b(0x25e)](_0x4ab830=>this[_0x38722b(0x231)][_0x38722b(0x264)](_0x4ab830)[_0x38722b(0x1ed)]));const _0x3c5d48=this[_0x38722b(0x283)]['match'](/(\d+)px/);_0x3c5d48?this[_0x38722b(0x1ea)]=parseInt(_0x3c5d48[0x1],0xa):(this[_0x38722b(0x1ea)]=0x12,this[_0x38722b(0x283)]=_0x38722b(0x1cf)),this[_0x38722b(0x1f1)]=this[_0x38722b(0x208)][_0x38722b(0x28f)]*(this['_fontSize']+this[_0x38722b(0x1d0)]),this[_0x38722b(0x201)]=0x5,this[_0x38722b(0x250)]=0x3,this[_0x38722b(0x1bd)]=Math['ceil'](this[_0x38722b(0x257)]+this[_0x38722b(0x201)]*0x2),this['_canvasHeight']=Math[_0x38722b(0x222)](this['_height']+this[_0x38722b(0x250)]),this['_textCanvas'][_0x38722b(0x1ed)]=this['_canvasWidth'],this[_0x38722b(0x1fc)]['height']=this[_0x38722b(0x212)],this['_textContext'][_0x38722b(0x1fb)]=this[_0x38722b(0x283)],this['_textContext'][_0x38722b(0x25a)]=_0x38722b(0x1f8);}[_0x2debe1(0x286)](_0x27e068){const _0x3626a3=_0x2debe1;this['_lines']=_0x27e068['split']('\x0a'),this['_textContext'][_0x3626a3(0x20e)]=_0x3626a3(0x287),this[_0x3626a3(0x231)]['clearRect'](0x0,0x0,this['_canvasWidth'],this[_0x3626a3(0x212)]),this[_0x3626a3(0x231)][_0x3626a3(0x1d7)](0x0,0x0,this[_0x3626a3(0x1bd)],this[_0x3626a3(0x212)]),this['_textContext'][_0x3626a3(0x20e)]=_0x3626a3(0x299),this[_0x3626a3(0x208)][_0x3626a3(0x205)]((_0x5f5007,_0x39abeb)=>{const _0x130e73=_0x3626a3,_0x1b4367=this['_paddingx'],_0x1b62d5=this['_paddingtop']+_0x39abeb*(this[_0x130e73(0x1ea)]+this[_0x130e73(0x1d0)]);this[_0x130e73(0x231)][_0x130e73(0x219)](_0x5f5007,_0x1b4367,_0x1b62d5);});}[_0x2debe1(0x26d)](){const _0x320856=_0x2debe1;this[_0x320856(0x1fc)][_0x320856(0x278)]=!this[_0x320856(0x1fc)][_0x320856(0x278)];}}class Renderer{constructor(_0x54416e){const _0x4ae060=_0x2debe1;this[_0x4ae060(0x20d)]=_0x54416e,this[_0x4ae060(0x216)]=[],this[_0x4ae060(0x28b)]={'r':0x0,'g':0x38/0xff,'b':0x65/0xff,'a':0x1};}async['init'](){const _0x2c3f0b=_0x2debe1;if(!navigator['gpu'])throw Error(_0x2c3f0b(0x200));const _0x33c535=await navigator[_0x2c3f0b(0x24c)][_0x2c3f0b(0x1d9)]();if(!_0x33c535)throw Error(_0x2c3f0b(0x242));this[_0x2c3f0b(0x234)]=await _0x33c535[_0x2c3f0b(0x236)](),this[_0x2c3f0b(0x1e3)]=this[_0x2c3f0b(0x20d)][_0x2c3f0b(0x29c)](_0x2c3f0b(0x1e9)),this[_0x2c3f0b(0x275)]=navigator[_0x2c3f0b(0x24c)]['getPreferredCanvasFormat'](),this[_0x2c3f0b(0x1e3)][_0x2c3f0b(0x23c)]({'device':this[_0x2c3f0b(0x234)],'format':this[_0x2c3f0b(0x275)]}),this[_0x2c3f0b(0x23a)](),window[_0x2c3f0b(0x1dc)]('resize',this[_0x2c3f0b(0x23a)]['bind'](this));}[_0x2debe1(0x23a)](){const _0x2440fd=_0x2debe1,_0x21835f=window[_0x2440fd(0x253)]||0x1,_0x46d283=window[_0x2440fd(0x1e7)]*_0x21835f,_0x5cc76f=window[_0x2440fd(0x1c2)]*_0x21835f;this[_0x2440fd(0x20d)][_0x2440fd(0x1ed)]=_0x46d283,this[_0x2440fd(0x20d)][_0x2440fd(0x22b)]=_0x5cc76f,this[_0x2440fd(0x20d)][_0x2440fd(0x1cc)][_0x2440fd(0x1ed)]=window[_0x2440fd(0x1e7)]+'px',this[_0x2440fd(0x20d)][_0x2440fd(0x1cc)][_0x2440fd(0x22b)]=window[_0x2440fd(0x1c2)]+'px',this['render']();}async['appendSceneObject'](_0x26222c){const _0x5031c8=_0x2debe1;await _0x26222c[_0x5031c8(0x281)](),this['_objects'][_0x5031c8(0x255)](_0x26222c);}[_0x2debe1(0x1de)](_0x8fca4a){const _0x9a1492=_0x2debe1;for(const _0x104a24 of this['_objects']){_0x104a24?.[_0x9a1492(0x262)]();}const _0x53867e=this[_0x9a1492(0x234)][_0x9a1492(0x24d)](),_0x53773e=this['_objects'][_0x9a1492(0x258)](_0x2a94bb=>_0x2a94bb[_0x9a1492(0x22c)]);if(_0x53773e){const _0x35fc61=_0x53867e[_0x9a1492(0x221)]();for(const _0x1b179a of this[_0x9a1492(0x216)]){if(_0x1b179a[_0x9a1492(0x22c)])_0x1b179a[_0x9a1492(0x225)](_0x35fc61);}_0x35fc61[_0x9a1492(0x1f2)]();}const _0x1a24eb=_0x53867e[_0x9a1492(0x244)]({'colorAttachments':[{'view':_0x8fca4a,'clearValue':this[_0x9a1492(0x28b)],'loadOp':_0x9a1492(0x226),'storeOp':'store'}]});for(const _0x5d7035 of this[_0x9a1492(0x216)]){_0x5d7035?.[_0x9a1492(0x296)](_0x1a24eb);}_0x1a24eb[_0x9a1492(0x1f2)]();const _0x1ea483=_0x53867e[_0x9a1492(0x24b)]();this[_0x9a1492(0x234)]['queue'][_0x9a1492(0x291)]([_0x1ea483]);}['render'](){const _0x1fcb83=_0x2debe1;this['renderToSelectedView'](this['_context'][_0x1fcb83(0x1d3)]()[_0x1fcb83(0x235)]());}}function mouseToNDC(_0x41ac9c){const _0x9584e=_0x2debe1,_0x18ba94=_0x41ac9c[_0x9584e(0x27e)]/window[_0x9584e(0x1e7)]*0x2-0x1,_0x50c8bd=-_0x41ac9c[_0x9584e(0x254)]/window[_0x9584e(0x1c2)]*0x2+0x1;return[_0x18ba94,_0x50c8bd];}function getCellFromEvent(_0x1fdeb4,_0xc63efc,_0x5af98e){const _0x1dbac8=_0x2debe1;let _0x3b445d=_0x1fdeb4[_0x1dbac8(0x27e)]/window[_0x1dbac8(0x1e7)]*0x2-0x1,_0x406be9=-_0x1fdeb4['clientY']/window[_0x1dbac8(0x1c2)]*0x2+0x1;_0x3b445d/=_0xc63efc['_pose'][0x4],_0x406be9/=_0xc63efc[_0x1dbac8(0x28e)][0x5];const _0x555fb3=[_0xc63efc[_0x1dbac8(0x28e)][0x0],_0xc63efc[_0x1dbac8(0x28e)][0x1],_0xc63efc['_pose'][0x2],_0xc63efc[_0x1dbac8(0x28e)][0x3]],_0x136e53=PGA2D[_0x1dbac8(0x284)]([_0x3b445d,_0x406be9],_0x555fb3),_0xfe14bc=0x1,_0xe5852=_0xfe14bc*0x2,_0x210680=Math[_0x1dbac8(0x28a)]((_0x136e53[0x0]+_0xfe14bc)/_0xe5852*_0x5af98e),_0x12251e=Math[_0x1dbac8(0x28a)]((_0x136e53[0x1]+_0xfe14bc)/_0xe5852*_0x5af98e);if(_0x210680<0x0||_0x210680>=_0x5af98e||_0x12251e<0x0||_0x12251e>=_0x5af98e)return null;const _0xa595d9=-_0xfe14bc+_0x210680/_0x5af98e*_0xe5852+_0xe5852/_0x5af98e*0.5,_0x1bd27f=-_0xfe14bc+_0x12251e/_0x5af98e*_0xe5852+_0xe5852/_0x5af98e*0.5,_0x17d2e6=0.5/_0x5af98e;if(-_0x17d2e6+_0xa595d9<=_0x136e53[0x0]&&_0x136e53[0x0]<=_0x17d2e6+_0xa595d9&&-_0x17d2e6+_0x1bd27f<=_0x136e53[0x1]&&_0x136e53[0x1]<=_0x17d2e6+_0x1bd27f)return{'u':_0x210680,'v':_0x12251e};return null;}const quadVertices=new Float32Array([-0.5,-0.5,0.5,-0.5,0.5,0.5,-0.5,0.5,-0.5,-0.5]);async function init(){const _0x34f395=_0x2debe1,_0x5c4f45=document[_0x34f395(0x22f)](_0x34f395(0x21e));_0x5c4f45['id']=_0x34f395(0x1db),document[_0x34f395(0x211)][_0x34f395(0x1e4)](_0x5c4f45);const _0x1d2cbe=new Renderer(_0x5c4f45);await _0x1d2cbe[_0x34f395(0x281)]();const _0x20eaf7=new Camera(),_0x58bada=new QuestGridObject(_0x1d2cbe[_0x34f395(0x234)],_0x1d2cbe[_0x34f395(0x275)],_0x20eaf7[_0x34f395(0x28e)],quadVertices,'/lib/Shaders/optimized_questGrid.wgsl',_0x34f395(0x1d6),GRID_SIZE*GRID_SIZE);await _0x1d2cbe[_0x34f395(0x1bb)](_0x58bada);const _0x14f903=new StandardTextObject('fps:\x200');_0x14f903[_0x34f395(0x1fc)][_0x34f395(0x1cc)]['zIndex']=_0x34f395(0x240);const _0x4c35ed=new StandardTextObject(_0x34f395(0x292));_0x4c35ed['_textCanvas'][_0x34f395(0x1cc)]['top']=_0x34f395(0x1c1),_0x4c35ed[_0x34f395(0x1fc)][_0x34f395(0x1cc)]['bottom']=_0x34f395(0x23b),_0x4c35ed[_0x34f395(0x1fc)]['style'][_0x34f395(0x209)]=_0x34f395(0x23b),_0x4c35ed[_0x34f395(0x1fc)][_0x34f395(0x1cc)][_0x34f395(0x1f3)]='100';const _0x7de88c=0.05;let _0x542c8a=0x0;const _0x22688a=0x3c,_0xa5b9af=0x1/_0x22688a*0x3e8;let _0x5e5926=Date['now'](),_0x41cc05=![],_0x303e63={'x':0x0,'y':0x0};const _0x27e369=0.001;window['addEventListener'](_0x34f395(0x21c),_0x54f3d4=>{const _0xd203f9=_0x34f395;switch(_0x54f3d4[_0xd203f9(0x1df)]){case _0xd203f9(0x1cb):case'w':case'W':_0x20eaf7['moveDown'](_0x7de88c),_0x58bada[_0xd203f9(0x1bf)]();break;case'ArrowDown':case's':case'S':_0x20eaf7[_0xd203f9(0x1d8)](_0x7de88c),_0x58bada['updateCameraPose']();break;case'ArrowLeft':case'a':case'A':_0x20eaf7[_0xd203f9(0x213)](_0x7de88c),_0x58bada[_0xd203f9(0x1bf)]();break;case'ArrowRight':case'd':case'D':_0x20eaf7['moveLeft'](_0x7de88c),_0x58bada[_0xd203f9(0x1bf)]();break;case'q':case'Q':_0x20eaf7[_0xd203f9(0x238)](),_0x58bada[_0xd203f9(0x1bf)]();break;case'e':case'E':_0x20eaf7['zoomOut'](),_0x58bada[_0xd203f9(0x1bf)]();break;case'\x20':_0x58bada['setPaused'](!_0x58bada[_0xd203f9(0x265)]);break;case'r':case'R':_0x58bada['reset']();break;case'=':case'+':_0x58bada['setSpeed'](-0x1e);break;case'-':_0x58bada[_0xd203f9(0x27c)](0x1e);break;case'f':case'F':_0x14f903[_0xd203f9(0x26d)](),_0x4c35ed[_0xd203f9(0x26d)]();break;}}),_0x5c4f45[_0x34f395(0x1dc)](_0x34f395(0x233),_0x309d97=>{const _0x4201e0=_0x34f395,_0x37913b=getCellFromEvent(_0x309d97,_0x20eaf7,GRID_SIZE);if(_0x37913b)_0x58bada[_0x4201e0(0x1be)](_0x37913b['u'],_0x37913b['v']);else{_0x41cc05=!![];const _0x282618=mouseToNDC(_0x309d97);_0x303e63['x']=_0x282618[0x0],_0x303e63['y']=_0x282618[0x1];}}),_0x5c4f45[_0x34f395(0x1dc)](_0x34f395(0x245),()=>{_0x41cc05=![];}),_0x5c4f45[_0x34f395(0x1dc)](_0x34f395(0x204),()=>{_0x41cc05=![];}),_0x5c4f45['addEventListener'](_0x34f395(0x29a),_0x5d1071=>{const _0x5978a6=_0x34f395;if(!_0x41cc05)return;const _0x18da99=mouseToNDC(_0x5d1071),_0x2867f6=_0x18da99[0x0]-_0x303e63['x'],_0x44312c=_0x18da99[0x1]-_0x303e63['y'],_0xf73a09=Math[_0x5978a6(0x21a)](_0x2867f6*_0x2867f6+_0x44312c*_0x44312c);if(_0xf73a09>_0x27e369){_0x303e63['x']=_0x18da99[0x0],_0x303e63['y']=_0x18da99[0x1];if(_0x2867f6>0x0)_0x20eaf7[_0x5978a6(0x1d5)](_0x2867f6);else _0x20eaf7['moveRight'](-_0x2867f6);if(_0x44312c>0x0)_0x20eaf7[_0x5978a6(0x220)](_0x44312c);else _0x20eaf7[_0x5978a6(0x1d8)](-_0x44312c);_0x58bada['updateCameraPose']();}});const _0x59f01a=()=>{const _0x4da0b7=_0x34f395,_0x1c18a4=Date[_0x4da0b7(0x1c3)]()-_0x5e5926;_0x1c18a4>_0xa5b9af&&(_0x542c8a+=0x1,_0x5e5926=Date['now']()-_0x1c18a4%_0xa5b9af,_0x14f903[_0x4da0b7(0x286)]('fps:\x20'+_0x542c8a),_0x1d2cbe[_0x4da0b7(0x296)]()),requestAnimationFrame(_0x59f01a);};return _0x5e5926=Date[_0x34f395(0x1c3)](),_0x59f01a(),setInterval(()=>{_0x542c8a=0x0;},0x3e8),_0x1d2cbe;}init()[_0x2debe1(0x1ba)](_0x232194=>{const _0xfee83d=_0x2debe1;console['log'](_0xfee83d(0x232),_0x232194);})[_0x2debe1(0x228)](_0x41e1c7=>{const _0x11eb81=_0x2debe1,_0x39d9f0=document[_0x11eb81(0x22f)]('p');_0x39d9f0[_0x11eb81(0x263)]=navigator['userAgent']+_0x11eb81(0x298)+_0x41e1c7[_0x11eb81(0x26c)],document['body'][_0x11eb81(0x1e4)](_0x39d9f0);const _0x3bb7b4=document['getElementById']('renderCanvas');if(_0x3bb7b4)_0x3bb7b4[_0x11eb81(0x295)]();});