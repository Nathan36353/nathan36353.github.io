const _0x4b9d27=_0x358a;(function(_0x533b81,_0x1c550c){const _0x3aa54f=_0x358a,_0x481a6a=_0x533b81();while(!![]){try{const _0xfff871=parseInt(_0x3aa54f(0xa5))/0x1*(parseInt(_0x3aa54f(0x149))/0x2)+parseInt(_0x3aa54f(0x148))/0x3+-parseInt(_0x3aa54f(0xf0))/0x4*(-parseInt(_0x3aa54f(0xba))/0x5)+parseInt(_0x3aa54f(0xef))/0x6*(parseInt(_0x3aa54f(0x15a))/0x7)+parseInt(_0x3aa54f(0x121))/0x8*(parseInt(_0x3aa54f(0xb9))/0x9)+-parseInt(_0x3aa54f(0xcd))/0xa+-parseInt(_0x3aa54f(0xf4))/0xb*(parseInt(_0x3aa54f(0xf2))/0xc);if(_0xfff871===_0x1c550c)break;else _0x481a6a['push'](_0x481a6a['shift']());}catch(_0x241d9e){_0x481a6a['push'](_0x481a6a['shift']());}}}(_0x1d9d,0x2fd24));class StandardTextObject{constructor(_0x2a1561,_0x1282be=0x5,_0x4bbb6b='18px\x20Arial'){const _0x4a608a=_0x358a;this[_0x4a608a(0xc3)]=_0x4bbb6b,this['_lineSpacing']=_0x1282be,this['_textCanvas']=document['createElement'](_0x4a608a(0xd7)),this[_0x4a608a(0x153)]=this['_textCanvas']['getContext']('2d'),this[_0x4a608a(0x146)](_0x2a1561),this[_0x4a608a(0xfb)](_0x2a1561),this[_0x4a608a(0x160)][_0x4a608a(0x150)]['position']=_0x4a608a(0x122),this[_0x4a608a(0x160)][_0x4a608a(0x150)][_0x4a608a(0x14f)]=_0x4a608a(0xf9),this['_textCanvas'][_0x4a608a(0x150)][_0x4a608a(0xfe)]=_0x4a608a(0xf9),this[_0x4a608a(0x160)][_0x4a608a(0x150)]['border']='1px\x20solid\x20red',document[_0x4a608a(0x142)][_0x4a608a(0x9e)](this['_textCanvas']);}[_0x4b9d27(0x146)](_0x580ea5){const _0x3998eb=_0x4b9d27;this['_textContext'][_0x3998eb(0x9c)]=this['_textFont'],this['_lines']=_0x580ea5['split']('\x0a'),this[_0x3998eb(0xe9)]=Math[_0x3998eb(0x139)](...this[_0x3998eb(0xb4)][_0x3998eb(0xb6)](_0x2317d3=>this[_0x3998eb(0x153)][_0x3998eb(0xed)](_0x2317d3)[_0x3998eb(0x12c)]));const _0x4bbb0e=this[_0x3998eb(0xc3)][_0x3998eb(0x13d)](/(\d+)px/);_0x4bbb0e?this[_0x3998eb(0xe4)]=parseInt(_0x4bbb0e[0x1],0xa):(this[_0x3998eb(0xe4)]=0x12,this[_0x3998eb(0xc3)]=_0x3998eb(0x104)),this[_0x3998eb(0x14c)]=this[_0x3998eb(0xb4)][_0x3998eb(0xbd)]*(this[_0x3998eb(0xe4)]+this['_lineSpacing']),this[_0x3998eb(0x155)]=0x5,this['_paddingtop']=0x3,this[_0x3998eb(0x10f)]=Math[_0x3998eb(0x164)](this[_0x3998eb(0xe9)]+this['_paddingx']*0x2),this['_canvasHeight']=Math[_0x3998eb(0x164)](this[_0x3998eb(0x14c)]+this['_paddingtop']),this[_0x3998eb(0x160)][_0x3998eb(0x12c)]=this['_canvasWidth'],this[_0x3998eb(0x160)][_0x3998eb(0xf1)]=this[_0x3998eb(0xbf)],this[_0x3998eb(0x153)][_0x3998eb(0x9c)]=this[_0x3998eb(0xc3)],this['_textContext'][_0x3998eb(0xc7)]=_0x3998eb(0x14f);}[_0x4b9d27(0xfb)](_0x58b76c){const _0x38f2bc=_0x4b9d27;this[_0x38f2bc(0xb4)]=_0x58b76c[_0x38f2bc(0x11a)]('\x0a'),this[_0x38f2bc(0x153)][_0x38f2bc(0xdb)]=_0x38f2bc(0xd9),this[_0x38f2bc(0x153)][_0x38f2bc(0x154)](0x0,0x0,this[_0x38f2bc(0x10f)],this[_0x38f2bc(0xbf)]),this[_0x38f2bc(0x153)][_0x38f2bc(0xa4)](0x0,0x0,this[_0x38f2bc(0x10f)],this[_0x38f2bc(0xbf)]),this[_0x38f2bc(0x153)]['fillStyle']='white',this[_0x38f2bc(0xb4)]['forEach']((_0x4036ad,_0x25cb2e)=>{const _0x5c2e5d=_0x38f2bc,_0x337277=this['_paddingx'],_0x2fcd81=this[_0x5c2e5d(0x15d)]+_0x25cb2e*(this[_0x5c2e5d(0xe4)]+this[_0x5c2e5d(0x110)]);this['_textContext']['fillText'](_0x4036ad,_0x337277,_0x2fcd81);});}[_0x4b9d27(0xf6)](){const _0x46838f=_0x4b9d27;this[_0x46838f(0x160)][_0x46838f(0x14a)]=!this['_textCanvas']['hidden'];}}function _0x1d9d(){const _0x202adb=['renderToSelectedView','/lib/Shaders/optimized_gridView.wgsl','_vertexBuffer','open','body','_context','getElementById','WASD:\x20pan\x20|\x20Q/E:\x20zoom\x20|\x20F:\x20fps\x20|\x20Drag:\x20pan','updateTextRegion','_objectCnt','1060353nIsRdk','3622XktwVj','hidden','_cellStatus','_height','_device','updatePose','top','style','clear','setPipeline','_textContext','clearRect','_paddingx','devicePixelRatio','getCurrentTexture','clientY','ArrowUp','77LEfYia','Shader\x20','_cellStateBuffers','_paddingtop','Method\x20\x27createRenderPipeline()\x27\x20must\x20be\x20implemented.','line-strip','_textCanvas','STORAGE','Grid\x20Bind\x20Group\x20Layout\x20','store','ceil','requestAdapter','createCommandEncoder','getContext','COPY_DST','_shaderFile','font','ArrowLeft','appendChild','Grid\x20status\x20Buffer\x201\x20','read-only-storage','mouseleave','onload','createGeometry','fillRect','29PwaVJX','WebGPU\x20is\x20not\x20supported\x20in\x20this\x20browser.','createRenderPipeline','_clearColor','message','createBuffer','_topology','writeBuffer','_computePipeline','gpu','end','DONE','finish','userAgent','_cameraPoseBuffer','_lines','_renderPipeline','map','100','then','1413jKpVAe','212270Qopxbd','Scroll\x205\x20ready','Render\x20Pipeline\x20','length','renderCanvas','_canvasHeight','mousemove','fps:\x20','VERTEX','_textFont','_vertices','Method\x20\x27createGeometry()\x27\x20must\x20be\x20implemented.','Grid\x20Render\x20Pipeline\x20','textBaseline','sqrt','ArrowRight','constructor','_numInstances','resizeCanvas','3870010SIGhuM','floor','onerror','Abstract\x20classes\x20can\x27t\x20be\x20instantiated.','Cache-Control','Grid\x20Pipeline\x20Layout','name','random','moveUp','beginComputePass','canvas','Grid\x20Bind\x20Group\x201\x20','rgba(1,\x201,\x201,\x200.5)','geometricProduct','fillStyle','normalizeMotor','in\x20cell\x20(','byteLength','BYTES_PER_ELEMENT','Camera\x20Pose\x20','responseText','beginRenderPass','dispatchWorkgroups','_fontSize','getPreferredCanvasFormat','webgpu','updateCameraPose','requestDevice','_width','init','Grid\x20status\x20Buffer\x202\x20','createElement','measureText','_canvas','103974OiQoxL','12ziWtsy','height','3684FkQNqg','vertexMain','6523RBBVHY','mousedown','toggleVisibility','configure','_bindGroups','10px','Vertices\x20','updateText','clientX','_pipelineLayout','left','_lastComputeTime','float32x2','_bindGroup','storage','setBindGroup','18px\x20Arial','innerWidth','push','now','computeMain','zoomIn','moveDown','fragmentMain','Grid\x20update\x20pipeline\x20','no-cache,\x20no-store,\x20max-age=0','_vertexBufferLayout','_canvasWidth','_lineSpacing','compute','createTranslator','_canvasFormat','keydown','getBindGroupLayout','send','Renderer\x20Bind\x20Group\x20','auto','_bindGroupLayout','split','addEventListener','render','ArrowDown','</br>','createComputePipeline','innerHeight','2088uucMcJ','absolute','zoomOut','status','draw','statusText','_cameraPose','_objects','getName','moveRight','_pose','width','queue','createBindGroup','zIndex','UNIFORM','updateGeometry','createShaders','setRequestHeader','_shaderModule','loadShader','_step','createBindGroupLayout','COMPUTE','max','applyMotorToPoint','bottom','createView','match'];_0x1d9d=function(){return _0x202adb;};return _0x1d9d();}function geometricProduct(_0xf74537,_0x3f5951){return[_0xf74537[0x0]*_0x3f5951[0x0]-_0xf74537[0x1]*_0x3f5951[0x1],_0xf74537[0x0]*_0x3f5951[0x1]+_0xf74537[0x1]*_0x3f5951[0x0],_0xf74537[0x0]*_0x3f5951[0x2]+_0xf74537[0x1]*_0x3f5951[0x3]+_0xf74537[0x2]*_0x3f5951[0x0]-_0xf74537[0x3]*_0x3f5951[0x1],_0xf74537[0x0]*_0x3f5951[0x3]-_0xf74537[0x1]*_0x3f5951[0x2]+_0xf74537[0x2]*_0x3f5951[0x1]+_0xf74537[0x3]*_0x3f5951[0x0]];}function reverse(_0x144217){return[_0x144217[0x0],-_0x144217[0x1],-_0x144217[0x2],-_0x144217[0x3]];}function createPoint(_0x30918f){return[0x0,0x1,_0x30918f[0x1],-_0x30918f[0x0]];}function extractPoint(_0x430ef2){return[-_0x430ef2[0x3]/_0x430ef2[0x1],_0x430ef2[0x2]/_0x430ef2[0x1]];}function applyMotor(_0x3bb4d8,_0x57a084){const _0x1f3478=reverse(_0x57a084),_0x42ed16=geometricProduct(_0x3bb4d8,_0x1f3478);return geometricProduct(_0x57a084,_0x42ed16);}export function applyMotorToPoint(_0x5de158,_0x504d0f){const _0xfc8fe1=createPoint(_0x5de158),_0x4d4b64=applyMotor(_0xfc8fe1,_0x504d0f);return extractPoint(_0x4d4b64);}export function normalizeMotor(_0x38fa73){const _0x1b1be5=_0x4b9d27,_0x508cdc=Math[_0x1b1be5(0xc8)](_0x38fa73[0x0]*_0x38fa73[0x0]+_0x38fa73[0x1]*_0x38fa73[0x1]+_0x38fa73[0x2]*_0x38fa73[0x2]+_0x38fa73[0x3]*_0x38fa73[0x3]);if(_0x508cdc===0x0)return[0x1,0x0,0x0,0x0];return[_0x38fa73[0x0]/_0x508cdc,_0x38fa73[0x1]/_0x508cdc,_0x38fa73[0x2]/_0x508cdc,_0x38fa73[0x3]/_0x508cdc];}export function createTranslator(_0x284839,_0x25b788){return[0x1,0x0,_0x284839/0x2,_0x25b788/0x2];}{geometricProduct,reverse,createTranslator,normalizeMotor,applyMotorToPoint;};class Camera{constructor(){const _0x55c802=_0x4b9d27;this[_0x55c802(0x12b)]=new Float32Array([0x1,0x0,0x0,0x0,0x1,0x1]);}['updatePose'](_0xae81a3){const _0x1d5737=_0x4b9d27;this['_pose'][0x0]=_0xae81a3[0x0],this['_pose'][0x1]=_0xae81a3[0x1],this[_0x1d5737(0x12b)][0x2]=_0xae81a3[0x2],this['_pose'][0x3]=_0xae81a3[0x3];}['moveLeft'](_0x1c7ac9){const _0x31daec=_0x4b9d27,_0x2eb687=PGA2D[_0x31daec(0x112)](-_0x1c7ac9,0x0),_0x2dd561=PGA2D['normalizeMotor'](PGA2D[_0x31daec(0xda)](_0x2eb687,[this[_0x31daec(0x12b)][0x0],this[_0x31daec(0x12b)][0x1],this['_pose'][0x2],this[_0x31daec(0x12b)][0x3]]));this[_0x31daec(0x14e)](_0x2dd561);}[_0x4b9d27(0x12a)](_0x38fa6d){const _0x114e85=_0x4b9d27,_0x358885=PGA2D[_0x114e85(0x112)](_0x38fa6d,0x0),_0x3c63ef=PGA2D['normalizeMotor'](PGA2D['geometricProduct'](_0x358885,[this[_0x114e85(0x12b)][0x0],this['_pose'][0x1],this[_0x114e85(0x12b)][0x2],this[_0x114e85(0x12b)][0x3]]));this[_0x114e85(0x14e)](_0x3c63ef);}['moveUp'](_0xc0daed){const _0x23ef99=_0x4b9d27,_0x5567fb=PGA2D['createTranslator'](0x0,_0xc0daed),_0x678c32=PGA2D[_0x23ef99(0xdc)](PGA2D[_0x23ef99(0xda)](_0x5567fb,[this[_0x23ef99(0x12b)][0x0],this[_0x23ef99(0x12b)][0x1],this[_0x23ef99(0x12b)][0x2],this[_0x23ef99(0x12b)][0x3]]));this['updatePose'](_0x678c32);}[_0x4b9d27(0x10a)](_0x362fcc){const _0x5bbb06=_0x4b9d27,_0x8a3909=PGA2D[_0x5bbb06(0x112)](0x0,-_0x362fcc),_0x207284=PGA2D['normalizeMotor'](PGA2D[_0x5bbb06(0xda)](_0x8a3909,[this[_0x5bbb06(0x12b)][0x0],this['_pose'][0x1],this['_pose'][0x2],this[_0x5bbb06(0x12b)][0x3]]));this[_0x5bbb06(0x14e)](_0x207284);}[_0x4b9d27(0x109)](){const _0x391579=_0x4b9d27;this[_0x391579(0x12b)][0x4]*=1.1,this[_0x391579(0x12b)][0x5]*=1.1;}[_0x4b9d27(0x123)](){const _0x40072a=_0x4b9d27;this[_0x40072a(0x12b)][0x4]/=1.1,this[_0x40072a(0x12b)][0x5]/=1.1;}}class SceneObject{static [_0x4b9d27(0x147)]=0x0;constructor(_0x33a332,_0x1266e0,_0x2bf743){const _0x227f5c=_0x4b9d27;if(this[_0x227f5c(0xca)]==SceneObject)throw new Error(_0x227f5c(0xd0));this[_0x227f5c(0x14d)]=_0x33a332,this[_0x227f5c(0x113)]=_0x1266e0,this[_0x227f5c(0x9b)]=_0x2bf743,SceneObject[_0x227f5c(0x147)]+=0x1;}[_0x4b9d27(0x129)](){const _0xdf8ee9=_0x4b9d27;return this[_0xdf8ee9(0xca)][_0xdf8ee9(0xd3)]+'\x20'+SceneObject[_0xdf8ee9(0x147)]['toString']();}async[_0x4b9d27(0xea)](){const _0x3dbfe5=_0x4b9d27;await this['createGeometry'](),await this[_0x3dbfe5(0x132)](),await this[_0x3dbfe5(0xa7)](),await this[_0x3dbfe5(0x11f)]();}async[_0x4b9d27(0xa3)](){const _0x1be1e6=_0x4b9d27;throw new Error(_0x1be1e6(0xc5));}['updateGeometry'](){}[_0x4b9d27(0x135)](_0x32f876){return new Promise((_0x4e308b,_0x1e80a5)=>{const _0x40d92e=_0x358a,_0x388f66=new XMLHttpRequest();_0x388f66[_0x40d92e(0x141)]('GET',_0x32f876),_0x388f66[_0x40d92e(0x133)](_0x40d92e(0xd1),_0x40d92e(0x10d)),_0x388f66[_0x40d92e(0xa2)]=function(){const _0x46ea51=_0x40d92e;_0x388f66['readyState']===XMLHttpRequest[_0x46ea51(0xb0)]&&_0x388f66[_0x46ea51(0x124)]===0xc8?_0x4e308b(_0x388f66[_0x46ea51(0xe1)]):_0x1e80a5({'status':_0x388f66[_0x46ea51(0x124)],'statusText':_0x388f66[_0x46ea51(0x126)]});},_0x388f66[_0x40d92e(0xcf)]=function(){const _0x1338ac=_0x40d92e;_0x1e80a5({'status':_0x388f66[_0x1338ac(0x124)],'statusText':_0x388f66[_0x1338ac(0x126)]});},_0x388f66[_0x40d92e(0x116)]();});}async[_0x4b9d27(0x132)](){const _0x192eba=_0x4b9d27,_0x2162f1=await this[_0x192eba(0x135)](this['_shaderFile']);this[_0x192eba(0x134)]=this[_0x192eba(0x14d)]['createShaderModule']({'label':_0x192eba(0x15b)+this[_0x192eba(0x129)](),'code':_0x2162f1});}async['createRenderPipeline'](){const _0x28902e=_0x4b9d27;throw new Error(_0x28902e(0x15e));}[_0x4b9d27(0x11c)](_0xa5a090){throw new Error('Method\x20\x27render(pass)\x27\x20must\x20be\x20implemented.');}async[_0x4b9d27(0x11f)](){}[_0x4b9d27(0x111)](_0x2136d4){}}class Camera2DVertexObject extends SceneObject{constructor(_0x59ee08,_0x17a08c,_0x1eaa16,_0x32a88d,_0x5ba568,_0x9f9b12,_0x38fa74=0x1){const _0x321893=_0x4b9d27;super(_0x59ee08,_0x17a08c,_0x5ba568),this[_0x321893(0x127)]=_0x1eaa16,this[_0x321893(0xc4)]=_0x32a88d,this[_0x321893(0xab)]=_0x9f9b12,this[_0x321893(0xcb)]=_0x38fa74;}async[_0x4b9d27(0xa3)](){const _0x15ccdb=_0x4b9d27;this[_0x15ccdb(0x140)]=this[_0x15ccdb(0x14d)][_0x15ccdb(0xaa)]({'label':_0x15ccdb(0xfa)+this[_0x15ccdb(0x129)](),'size':this['_vertices'][_0x15ccdb(0xde)],'usage':GPUBufferUsage[_0x15ccdb(0xc2)]|GPUBufferUsage[_0x15ccdb(0x9a)]}),this['_device']['queue'][_0x15ccdb(0xac)](this[_0x15ccdb(0x140)],0x0,this[_0x15ccdb(0xc4)]),this[_0x15ccdb(0x10e)]={'arrayStride':0x2*Float32Array[_0x15ccdb(0xdf)],'attributes':[{'shaderLocation':0x0,'format':_0x15ccdb(0x100),'offset':0x0}]},this[_0x15ccdb(0xb3)]=this[_0x15ccdb(0x14d)][_0x15ccdb(0xaa)]({'label':_0x15ccdb(0xe0)+this[_0x15ccdb(0x129)](),'size':this['_cameraPose'][_0x15ccdb(0xde)],'usage':GPUBufferUsage[_0x15ccdb(0x130)]|GPUBufferUsage[_0x15ccdb(0x9a)]}),this[_0x15ccdb(0xe7)]();}[_0x4b9d27(0x131)](){}[_0x4b9d27(0xe7)](){const _0x2c9884=_0x4b9d27;if(this[_0x2c9884(0xb3)])this[_0x2c9884(0x14d)][_0x2c9884(0x12d)][_0x2c9884(0xac)](this[_0x2c9884(0xb3)],0x0,this[_0x2c9884(0x127)]);}async['createRenderPipeline'](){const _0x1ae4f7=_0x4b9d27;this[_0x1ae4f7(0xb5)]=this[_0x1ae4f7(0x14d)][_0x1ae4f7(0xa7)]({'label':_0x1ae4f7(0xbc)+this[_0x1ae4f7(0x129)](),'layout':_0x1ae4f7(0x118),'vertex':{'module':this[_0x1ae4f7(0x134)],'entryPoint':_0x1ae4f7(0xf3),'buffers':[this['_vertexBufferLayout']]},'fragment':{'module':this[_0x1ae4f7(0x134)],'entryPoint':_0x1ae4f7(0x10b),'targets':[{'format':this[_0x1ae4f7(0x113)]}]},'primitive':{'topology':this[_0x1ae4f7(0xab)]}}),this[_0x1ae4f7(0x101)]=this['_device'][_0x1ae4f7(0x12e)]({'label':_0x1ae4f7(0x117)+this[_0x1ae4f7(0x129)](),'layout':this[_0x1ae4f7(0xb5)][_0x1ae4f7(0x115)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x1ae4f7(0xb3)]}}]});}[_0x4b9d27(0x11c)](_0x3cc7b7){const _0x29d848=_0x4b9d27;_0x3cc7b7[_0x29d848(0x152)](this[_0x29d848(0xb5)]),_0x3cc7b7['setVertexBuffer'](0x0,this[_0x29d848(0x140)]),_0x3cc7b7[_0x29d848(0x103)](0x0,this['_bindGroup']),_0x3cc7b7[_0x29d848(0x125)](this['_vertices'][_0x29d848(0xbd)]/0x2,this[_0x29d848(0xcb)]);}async['createComputePipeline'](){}[_0x4b9d27(0x111)](_0x2bdae3){}}const GRID_SIZE=0xa;class GridObject extends Camera2DVertexObject{constructor(_0x481bc2,_0x3e3d07,_0xb048ee,_0x517194,_0x451f0a,_0x5ad31a,_0x40c68c){super(_0x481bc2,_0x3e3d07,_0xb048ee,_0x517194,_0x451f0a,_0x5ad31a,_0x40c68c);}async[_0x4b9d27(0xa3)](){const _0x3bb98e=_0x4b9d27;await super[_0x3bb98e(0xa3)](),this[_0x3bb98e(0x14b)]=new Uint32Array(GRID_SIZE*GRID_SIZE);for(let _0x4e9fe3=0x0;_0x4e9fe3<this[_0x3bb98e(0x14b)][_0x3bb98e(0xbd)];_0x4e9fe3++){this['_cellStatus'][_0x4e9fe3]=Math[_0x3bb98e(0xd4)]()>0.5?0x1:0x0;}this[_0x3bb98e(0x15c)]=[this['_device'][_0x3bb98e(0xaa)]({'label':_0x3bb98e(0x9f)+this[_0x3bb98e(0x129)](),'size':this[_0x3bb98e(0x14b)][_0x3bb98e(0xde)],'usage':GPUBufferUsage['STORAGE']|GPUBufferUsage[_0x3bb98e(0x9a)]}),this[_0x3bb98e(0x14d)][_0x3bb98e(0xaa)]({'label':_0x3bb98e(0xeb)+this[_0x3bb98e(0x129)](),'size':this['_cellStatus'][_0x3bb98e(0xde)],'usage':GPUBufferUsage[_0x3bb98e(0x161)]|GPUBufferUsage[_0x3bb98e(0x9a)]})],this[_0x3bb98e(0x14d)]['queue'][_0x3bb98e(0xac)](this[_0x3bb98e(0x15c)][0x0],0x0,this[_0x3bb98e(0x14b)]),this[_0x3bb98e(0x14d)][_0x3bb98e(0x12d)]['writeBuffer'](this[_0x3bb98e(0x15c)][0x1],0x0,this['_cellStatus']),this[_0x3bb98e(0x136)]=0x0;}async[_0x4b9d27(0xa7)](){const _0x55a29c=_0x4b9d27;this['_bindGroupLayout']=this['_device'][_0x55a29c(0x137)]({'label':_0x55a29c(0x162)+this[_0x55a29c(0x129)](),'entries':[{'binding':0x0,'visibility':GPUShaderStage[_0x55a29c(0xc2)],'buffer':{}},{'binding':0x1,'visibility':GPUShaderStage[_0x55a29c(0xc2)]|GPUShaderStage['COMPUTE'],'buffer':{'type':_0x55a29c(0xa0)}},{'binding':0x2,'visibility':GPUShaderStage[_0x55a29c(0x138)],'buffer':{'type':_0x55a29c(0x102)}}]}),this[_0x55a29c(0xfd)]=this[_0x55a29c(0x14d)]['createPipelineLayout']({'label':_0x55a29c(0xd2),'bindGroupLayouts':[this[_0x55a29c(0x119)]]}),this[_0x55a29c(0xb5)]=this[_0x55a29c(0x14d)][_0x55a29c(0xa7)]({'label':_0x55a29c(0xc6)+this[_0x55a29c(0x129)](),'layout':this['_pipelineLayout'],'vertex':{'module':this[_0x55a29c(0x134)],'entryPoint':_0x55a29c(0xf3),'buffers':[this[_0x55a29c(0x10e)]]},'fragment':{'module':this[_0x55a29c(0x134)],'entryPoint':_0x55a29c(0x10b),'targets':[{'format':this[_0x55a29c(0x113)]}]},'primitive':{'topology':this[_0x55a29c(0xab)]}}),this[_0x55a29c(0xf8)]=[this[_0x55a29c(0x14d)]['createBindGroup']({'label':_0x55a29c(0xd8)+this[_0x55a29c(0x129)](),'layout':this[_0x55a29c(0x119)],'entries':[{'binding':0x0,'resource':{'buffer':this[_0x55a29c(0xb3)]}},{'binding':0x1,'resource':{'buffer':this[_0x55a29c(0x15c)][0x0]}},{'binding':0x2,'resource':{'buffer':this[_0x55a29c(0x15c)][0x1]}}]}),this['_device'][_0x55a29c(0x12e)]({'label':'Grid\x20Bind\x20Group\x202\x20'+this[_0x55a29c(0x129)](),'layout':this[_0x55a29c(0x119)],'entries':[{'binding':0x0,'resource':{'buffer':this[_0x55a29c(0xb3)]}},{'binding':0x1,'resource':{'buffer':this[_0x55a29c(0x15c)][0x1]}},{'binding':0x2,'resource':{'buffer':this[_0x55a29c(0x15c)][0x0]}}]})];}['render'](_0x27c812){const _0xb587d6=_0x4b9d27;_0x27c812[_0xb587d6(0x152)](this[_0xb587d6(0xb5)]),_0x27c812['setVertexBuffer'](0x0,this[_0xb587d6(0x140)]),_0x27c812[_0xb587d6(0x103)](0x0,this[_0xb587d6(0xf8)][this[_0xb587d6(0x136)]%0x2]),_0x27c812['draw'](this[_0xb587d6(0xc4)][_0xb587d6(0xbd)]/0x2,this[_0xb587d6(0xcb)]);}async['createComputePipeline'](){const _0x3d441e=_0x4b9d27;this[_0x3d441e(0xad)]=this[_0x3d441e(0x14d)][_0x3d441e(0x11f)]({'label':_0x3d441e(0x10c)+this['getName'](),'layout':this[_0x3d441e(0xfd)],'compute':{'module':this[_0x3d441e(0x134)],'entryPoint':_0x3d441e(0x108)}});}['compute'](_0x2e6135){const _0x58b620=_0x4b9d27,_0x466eec=performance['now']();this[_0x58b620(0xff)]=this[_0x58b620(0xff)]??_0x466eec;if(_0x466eec-this[_0x58b620(0xff)]<0x12c)return;this[_0x58b620(0xff)]=_0x466eec,_0x2e6135[_0x58b620(0x152)](this[_0x58b620(0xad)]),_0x2e6135[_0x58b620(0x103)](0x0,this[_0x58b620(0xf8)][this['_step']%0x2]),_0x2e6135[_0x58b620(0xe3)](Math[_0x58b620(0x164)](GRID_SIZE/0x4),Math[_0x58b620(0x164)](GRID_SIZE/0x4)),++this[_0x58b620(0x136)];}}function _0x358a(_0x5e3abc,_0x4542fb){_0x5e3abc=_0x5e3abc-0x98;const _0x1d9df4=_0x1d9d();let _0x358a23=_0x1d9df4[_0x5e3abc];return _0x358a23;}class Renderer{constructor(_0x25b107){const _0x3d9b7e=_0x4b9d27;this[_0x3d9b7e(0xee)]=_0x25b107,this[_0x3d9b7e(0x128)]=[],this[_0x3d9b7e(0xa8)]={'r':0x0,'g':0x38/0xff,'b':0x65/0xff,'a':0x1};}async[_0x4b9d27(0xea)](){const _0x2f3c61=_0x4b9d27;if(!navigator['gpu'])throw Error(_0x2f3c61(0xa6));const _0x225ef8=await navigator[_0x2f3c61(0xae)][_0x2f3c61(0x165)]();if(!_0x225ef8)throw Error('Couldn\x27t\x20request\x20WebGPU\x20adapter.');this[_0x2f3c61(0x14d)]=await _0x225ef8[_0x2f3c61(0xe8)](),this[_0x2f3c61(0x143)]=this[_0x2f3c61(0xee)][_0x2f3c61(0x99)](_0x2f3c61(0xe6)),this[_0x2f3c61(0x113)]=navigator[_0x2f3c61(0xae)][_0x2f3c61(0xe5)](),this[_0x2f3c61(0x143)][_0x2f3c61(0xf7)]({'device':this['_device'],'format':this[_0x2f3c61(0x113)]}),this[_0x2f3c61(0xcc)](),window[_0x2f3c61(0x11b)]('resize',this[_0x2f3c61(0xcc)]['bind'](this));}[_0x4b9d27(0xcc)](){const _0x1f9809=_0x4b9d27,_0x4f59dc=window[_0x1f9809(0x156)]||0x1,_0x24e7b9=window['innerWidth']*_0x4f59dc,_0x1b9705=window[_0x1f9809(0x120)]*_0x4f59dc;this[_0x1f9809(0xee)][_0x1f9809(0x12c)]=_0x24e7b9,this['_canvas'][_0x1f9809(0xf1)]=_0x1b9705,this[_0x1f9809(0xee)][_0x1f9809(0x150)][_0x1f9809(0x12c)]=window[_0x1f9809(0x105)]+'px',this[_0x1f9809(0xee)][_0x1f9809(0x150)]['height']=window['innerHeight']+'px',this[_0x1f9809(0x11c)]();}async['appendSceneObject'](_0x35e970){const _0x361215=_0x4b9d27;await _0x35e970['init'](),this[_0x361215(0x128)][_0x361215(0x106)](_0x35e970);}[_0x4b9d27(0x13e)](_0x4e52ed){const _0x2fc7c8=_0x4b9d27;for(const _0x203eff of this[_0x2fc7c8(0x128)]){_0x203eff?.[_0x2fc7c8(0x131)]();}const _0x1c2cad=this[_0x2fc7c8(0x14d)][_0x2fc7c8(0x98)](),_0x24652e=this['_objects']['some'](_0x57d3e1=>_0x57d3e1['_computePipeline']);if(_0x24652e){const _0x281f7c=_0x1c2cad[_0x2fc7c8(0xd6)]();for(const _0x2cb980 of this[_0x2fc7c8(0x128)]){if(_0x2cb980[_0x2fc7c8(0xad)])_0x2cb980[_0x2fc7c8(0x111)](_0x281f7c);}_0x281f7c[_0x2fc7c8(0xaf)]();}const _0x54aff3=_0x1c2cad[_0x2fc7c8(0xe2)]({'colorAttachments':[{'view':_0x4e52ed,'clearValue':this[_0x2fc7c8(0xa8)],'loadOp':_0x2fc7c8(0x151),'storeOp':_0x2fc7c8(0x163)}]});for(const _0x3ceae8 of this[_0x2fc7c8(0x128)]){_0x3ceae8?.[_0x2fc7c8(0x11c)](_0x54aff3);}_0x54aff3[_0x2fc7c8(0xaf)]();const _0x3fedcb=_0x1c2cad[_0x2fc7c8(0xb1)]();this[_0x2fc7c8(0x14d)][_0x2fc7c8(0x12d)]['submit']([_0x3fedcb]);}[_0x4b9d27(0x11c)](){const _0x2bb484=_0x4b9d27;this['renderToSelectedView'](this[_0x2bb484(0x143)][_0x2bb484(0x157)]()[_0x2bb484(0x13c)]());}}function mouseToNDC(_0x1d4f73){const _0x5d6317=_0x4b9d27,_0x5c8607=_0x1d4f73['clientX']/window[_0x5d6317(0x105)]*0x2-0x1,_0x1bca61=-_0x1d4f73[_0x5d6317(0x158)]/window[_0x5d6317(0x120)]*0x2+0x1;return[_0x5c8607,_0x1bca61];}const gridSize=0xa,quadVertices=new Float32Array([-0.5,-0.5,0.5,-0.5,0.5,0.5,-0.5,0.5,-0.5,-0.5]);async function init(){const _0x221c14=_0x4b9d27,_0x27499a=document['createElement']('canvas');_0x27499a['id']='renderCanvas',document[_0x221c14(0x142)]['appendChild'](_0x27499a);const _0x669124=new Renderer(_0x27499a);await _0x669124['init']();const _0xd48ee5=new Camera(),_0xddb5f=new GridObject(_0x669124[_0x221c14(0x14d)],_0x669124[_0x221c14(0x113)],_0xd48ee5[_0x221c14(0x12b)],quadVertices,_0x221c14(0x13f),_0x221c14(0x15f),gridSize*gridSize);await _0x669124['appendSceneObject'](_0xddb5f);let _0xfe6c9b='??';const _0x3ec891=new StandardTextObject('fps:\x20'+_0xfe6c9b);_0x3ec891[_0x221c14(0x160)][_0x221c14(0x150)]['zIndex']=_0x221c14(0xb7);const _0x15ed8c=new StandardTextObject(_0x221c14(0x145));_0x15ed8c[_0x221c14(0x160)]['style']['top']=_0x221c14(0x118),_0x15ed8c['_textCanvas'][_0x221c14(0x150)][_0x221c14(0x13b)]=_0x221c14(0xf9),_0x15ed8c[_0x221c14(0x160)]['style'][_0x221c14(0xfe)]=_0x221c14(0xf9),_0x15ed8c[_0x221c14(0x160)][_0x221c14(0x150)][_0x221c14(0x12f)]=_0x221c14(0xb7);const _0x9fc75e=0.05;let _0x4bb43d=0x0;const _0x2f6623=0x3c,_0x56036c=0x1/_0x2f6623*0x3e8;let _0x4640f8=Date['now']();window[_0x221c14(0x11b)](_0x221c14(0x114),_0x3542e8=>{const _0x17eee1=_0x221c14;switch(_0x3542e8['key']){case _0x17eee1(0x159):case'w':case'W':_0xd48ee5[_0x17eee1(0x10a)](_0x9fc75e),_0xddb5f[_0x17eee1(0xe7)]();break;case _0x17eee1(0x11d):case's':case'S':_0xd48ee5[_0x17eee1(0xd5)](_0x9fc75e),_0xddb5f[_0x17eee1(0xe7)]();break;case _0x17eee1(0x9d):case'a':case'A':_0xd48ee5[_0x17eee1(0x12a)](_0x9fc75e),_0xddb5f[_0x17eee1(0xe7)]();break;case _0x17eee1(0xc9):case'd':case'D':_0xd48ee5['moveLeft'](_0x9fc75e),_0xddb5f['updateCameraPose']();break;case'q':case'Q':_0xd48ee5[_0x17eee1(0x109)](),_0xddb5f[_0x17eee1(0xe7)]();break;case'e':case'E':_0xd48ee5[_0x17eee1(0x123)](),_0xddb5f['updateCameraPose']();break;case'f':case'F':_0x3ec891['toggleVisibility']();break;}});let _0x15372b=![],_0x8d35c5={'x':0x0,'y':0x0};const _0x505114=0.001,_0x21b5c3=0x1,_0x5db8f6=_0x21b5c3*0x2;_0x27499a[_0x221c14(0x11b)](_0x221c14(0xf5),_0x6ad36b=>{_0x15372b=!![];const _0x1dee81=mouseToNDC(_0x6ad36b);_0x8d35c5['x']=_0x1dee81[0x0],_0x8d35c5['y']=_0x1dee81[0x1];}),_0x27499a[_0x221c14(0x11b)]('mouseup',()=>{_0x15372b=![];}),_0x27499a['addEventListener'](_0x221c14(0xa1),()=>{_0x15372b=![];}),_0x27499a[_0x221c14(0x11b)](_0x221c14(0xc0),_0x12a744=>{const _0x5e7d83=_0x221c14;let _0x40145a=_0x12a744[_0x5e7d83(0xfc)]/window['innerWidth']*0x2-0x1,_0x13139d=-_0x12a744['clientY']/window[_0x5e7d83(0x120)]*0x2+0x1;_0x40145a/=_0xd48ee5[_0x5e7d83(0x12b)][0x4],_0x13139d/=_0xd48ee5[_0x5e7d83(0x12b)][0x5];const _0x3636a1=[_0xd48ee5['_pose'][0x0],_0xd48ee5[_0x5e7d83(0x12b)][0x1],_0xd48ee5[_0x5e7d83(0x12b)][0x2],_0xd48ee5[_0x5e7d83(0x12b)][0x3]],_0x2cde8b=PGA2D[_0x5e7d83(0x13a)]([_0x40145a,_0x13139d],_0x3636a1);let _0x716f65=Math[_0x5e7d83(0xce)]((_0x2cde8b[0x0]+_0x21b5c3)/_0x5db8f6*gridSize),_0x165b31=Math[_0x5e7d83(0xce)]((_0x2cde8b[0x1]+_0x21b5c3)/_0x5db8f6*gridSize);if(_0x716f65>=0x0&&_0x716f65<gridSize&&_0x165b31>=0x0&&_0x165b31<gridSize){const _0x330a7a=-_0x21b5c3+_0x716f65/gridSize*_0x5db8f6+_0x5db8f6/gridSize*0.5,_0x985e3b=-_0x21b5c3+_0x165b31/gridSize*_0x5db8f6+_0x5db8f6/gridSize*0.5,_0x5d6a1e=0.5/gridSize;-_0x5d6a1e+_0x330a7a<=_0x2cde8b[0x0]&&_0x2cde8b[0x0]<=_0x5d6a1e+_0x330a7a&&-_0x5d6a1e+_0x985e3b<=_0x2cde8b[0x1]&&_0x2cde8b[0x1]<=_0x5d6a1e+_0x985e3b&&console['log'](_0x5e7d83(0xdd)+_0x716f65+',\x20'+_0x165b31+')');}if(!_0x15372b)return;const _0x46d1d8=mouseToNDC(_0x12a744),_0x52c60b=_0x46d1d8[0x0]-_0x8d35c5['x'],_0x1bdccf=_0x46d1d8[0x1]-_0x8d35c5['y'],_0x417302=Math[_0x5e7d83(0xc8)](_0x52c60b*_0x52c60b+_0x1bdccf*_0x1bdccf);if(_0x417302>_0x505114){_0x8d35c5['x']=_0x46d1d8[0x0],_0x8d35c5['y']=_0x46d1d8[0x1];if(_0x52c60b>0x0)_0xd48ee5['moveLeft'](_0x52c60b);else _0xd48ee5[_0x5e7d83(0x12a)](-_0x52c60b);if(_0x1bdccf>0x0)_0xd48ee5[_0x5e7d83(0x10a)](_0x1bdccf);else _0xd48ee5[_0x5e7d83(0xd5)](-_0x1bdccf);_0xddb5f[_0x5e7d83(0xe7)]();}});const _0x2dad9d=()=>{const _0x50b534=_0x221c14,_0x5c9bb9=Date[_0x50b534(0x107)]()-_0x4640f8;_0x5c9bb9>_0x56036c&&(_0x4bb43d+=0x1,_0x4640f8=Date[_0x50b534(0x107)]()-_0x5c9bb9%_0x56036c,_0x3ec891['updateText'](_0x50b534(0xc1)+_0x4bb43d),_0x669124[_0x50b534(0x11c)]()),requestAnimationFrame(_0x2dad9d);};return _0x4640f8=Date[_0x221c14(0x107)](),_0x2dad9d(),setInterval(()=>{_0x4bb43d=0x0;},0x3e8),_0x669124;}init()[_0x4b9d27(0xb8)](_0x410276=>{const _0x5e24cd=_0x4b9d27;console['log'](_0x5e24cd(0xbb),_0x410276);})['catch'](_0x2d1fb9=>{const _0x37e9f2=_0x4b9d27,_0x5534d9=document[_0x37e9f2(0xec)]('p');_0x5534d9['innerHTML']=navigator[_0x37e9f2(0xb2)]+_0x37e9f2(0x11e)+_0x2d1fb9[_0x37e9f2(0xa9)],document[_0x37e9f2(0x142)]['appendChild'](_0x5534d9);const _0x473f6f=document[_0x37e9f2(0x144)](_0x37e9f2(0xbe));if(_0x473f6f)_0x473f6f['remove']();});